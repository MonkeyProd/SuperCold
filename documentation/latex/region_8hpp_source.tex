\hypertarget{region_8hpp_source}{}\doxysection{region.\+hpp}
\label{region_8hpp_source}\index{external/toml/region.hpp@{external/toml/region.hpp}}
\mbox{\hyperlink{region_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//     Copyright Toru Niina 2017.}}
\DoxyCodeLine{2 \textcolor{comment}{// Distributed under the MIT License.}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#ifndef TOML11\_REGION\_HPP}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#define TOML11\_REGION\_HPP}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <initializer\_list>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <iterator>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <iomanip>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{color_8hpp}{color.hpp}}"{}}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacetoml}{toml}}}
\DoxyCodeLine{15 \{}
\DoxyCodeLine{16 \textcolor{keyword}{namespace }detail}
\DoxyCodeLine{17 \{}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{comment}{// helper function to avoid std::string(0, 'c') or std::string(iter, iter)}}
\DoxyCodeLine{20 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Iterator>}
\DoxyCodeLine{21 std::string \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(Iterator first, Iterator last)}
\DoxyCodeLine{22 \{}
\DoxyCodeLine{23     \textcolor{keywordflow}{if}(first == last) \{\textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};\}}
\DoxyCodeLine{24     \textcolor{keywordflow}{return} std::string(first, last);}
\DoxyCodeLine{25 \}}
\DoxyCodeLine{26 \textcolor{keyword}{inline} std::string \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(std::size\_t len, \textcolor{keywordtype}{char} c)}
\DoxyCodeLine{27 \{}
\DoxyCodeLine{28     \textcolor{keywordflow}{if}(len == 0) \{\textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};\}}
\DoxyCodeLine{29     \textcolor{keywordflow}{return} std::string(len, c);}
\DoxyCodeLine{30 \}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{comment}{// region\_base is a base class of location and region that are defined below.}}
\DoxyCodeLine{33 \textcolor{comment}{// it will be used to generate better error messages.}}
\DoxyCodeLine{34 \textcolor{keyword}{struct }\mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}}
\DoxyCodeLine{35 \{}
\DoxyCodeLine{36     \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a08c9ceab879d163a77495e3f06016773}{region\_base}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{37     \textcolor{keyword}{virtual} \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a03b6d40d385dc3569e04c7c391f0caa7}{\string~region\_base}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{38     \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_ad0dd93def6c58fc497e5c4227598fb44}{region\_base}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{39     \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_ab34101de3563323eebaa0ae54d153882}{region\_base}}(\mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}\&\&     ) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{40     \mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}\& \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a78a6213303cb281dc95fea399b63e87c}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{41     \mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}\& \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a0ac9b607cecc602f7c5835e5eaa74051}{operator=}}(\mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}\&\&     ) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a04d30cc67ae064dcb5124a6d6c0d8829}{is\_ok}}()           const noexcept \{\textcolor{keywordflow}{return} \textcolor{keyword}{false};\}}
\DoxyCodeLine{44     \textcolor{keyword}{virtual} \textcolor{keywordtype}{char} \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a851763061c8dd8e925192f5e71973b2f}{front}}()           const noexcept \{\textcolor{keywordflow}{return} \textcolor{charliteral}{'\(\backslash\)0'};\}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     \textcolor{keyword}{virtual} std::string \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a47be03c05f51e0f1521961f4bf91675b}{str}}()\textcolor{keyword}{      const }\{\textcolor{keywordflow}{return} std::string(\textcolor{stringliteral}{"{}unknown region"{}});\}}
\DoxyCodeLine{47     \textcolor{keyword}{virtual} std::string \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_af1e9c07f9510f553e33277207249b980}{name}}()\textcolor{keyword}{     const }\{\textcolor{keywordflow}{return} std::string(\textcolor{stringliteral}{"{}unknown file"{}});\}}
\DoxyCodeLine{48     \textcolor{keyword}{virtual} std::string \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a94f53e54f87a6b18b673c93c5c16c5b1}{line}}()\textcolor{keyword}{     const }\{\textcolor{keywordflow}{return} std::string(\textcolor{stringliteral}{"{}unknown line"{}});\}}
\DoxyCodeLine{49     \textcolor{keyword}{virtual} std::string \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_ad676f2456819ebd43cc6402f017c3ff8}{line\_num}}()\textcolor{keyword}{ const }\{\textcolor{keywordflow}{return} std::string(\textcolor{stringliteral}{"{}?"{}});\}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51     \textcolor{comment}{// length of the region}}
\DoxyCodeLine{52     \textcolor{keyword}{virtual} std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_abb3aa3ca6b0a0cd80e257ceb2a83877c}{size}}()     const noexcept \{\textcolor{keywordflow}{return} 0;\}}
\DoxyCodeLine{53     \textcolor{comment}{// number of characters in the line before the region}}
\DoxyCodeLine{54     \textcolor{keyword}{virtual} std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a5d9badf7c1617c3dbf220128beed9e69}{before}}()   const noexcept \{\textcolor{keywordflow}{return} 0;\}}
\DoxyCodeLine{55     \textcolor{comment}{// number of characters in the line after the region}}
\DoxyCodeLine{56     \textcolor{keyword}{virtual} std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a029632182c4df5911f569e8220f7ad84}{after}}()    const noexcept \{\textcolor{keywordflow}{return} 0;\}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{keyword}{virtual} std::vector<std::string> \mbox{\hyperlink{structtoml_1_1detail_1_1region__base_a628ff6c7e336fc99b9d7c6b884066d55}{comments}}()\textcolor{keyword}{ const }\{\textcolor{keywordflow}{return} \{\};\}}
\DoxyCodeLine{59     \textcolor{comment}{// ```toml}}
\DoxyCodeLine{60     \textcolor{comment}{// \# comment\_before}}
\DoxyCodeLine{61     \textcolor{comment}{// key = "{}value"{} \# comment\_inline}}
\DoxyCodeLine{62     \textcolor{comment}{// ```}}
\DoxyCodeLine{63 \};}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \textcolor{comment}{// location represents a position in a container, which contains a file content.}}
\DoxyCodeLine{66 \textcolor{comment}{// it can be considered as a region that contains only one character.}}
\DoxyCodeLine{67 \textcolor{comment}{//}}
\DoxyCodeLine{68 \textcolor{comment}{// it contains pointer to the file content and iterator that points the current}}
\DoxyCodeLine{69 \textcolor{comment}{// location.}}
\DoxyCodeLine{70 \textcolor{keyword}{struct }\mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}} final : \textcolor{keyword}{public} \mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}}
\DoxyCodeLine{71 \{}
\DoxyCodeLine{72     \textcolor{keyword}{using }\mbox{\hyperlink{structtoml_1_1detail_1_1location_a031ca4974dde3ebefbd7398668bad4c8}{const\_iterator}}  = \textcolor{keyword}{typename} std::vector<char>::const\_iterator;}
\DoxyCodeLine{73     \textcolor{keyword}{using }\mbox{\hyperlink{structtoml_1_1detail_1_1location_a285ff825ac56534d138e4dfe3e935beb}{difference\_type}} = \textcolor{keyword}{typename} const\_iterator::difference\_type;}
\DoxyCodeLine{74     \textcolor{keyword}{using }\mbox{\hyperlink{structtoml_1_1detail_1_1location_a8084d1b04443e5819764eeb9b3d9b256}{source\_ptr}}      = std::shared\_ptr<const std::vector<char>>;}
\DoxyCodeLine{75 }
\DoxyCodeLine{76     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a63170a96936ce5957e54e43a377a6118}{location}}(std::string source\_name, std::vector<char> cont)}
\DoxyCodeLine{77       : source\_(std::make\_shared<std::vector<char>>(std::move(cont))),}
\DoxyCodeLine{78         line\_number\_(1), source\_name\_(std::move(source\_name)), iter\_(source\_-\/>cbegin())}
\DoxyCodeLine{79     \{\}}
\DoxyCodeLine{80     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a8f48677df976dbbd31288c1e36c58ce7}{location}}(std::string source\_name, \textcolor{keyword}{const} std::string\& cont)}
\DoxyCodeLine{81       : source\_(std::make\_shared<std::vector<char>>(cont.\mbox{\hyperlink{structtoml_1_1detail_1_1location_a4b1ba9aeab640d375f97b09efce3dab8}{begin}}(), cont.\mbox{\hyperlink{structtoml_1_1detail_1_1location_ad2b13df42c4b6202d006830c3fa5eee6}{end}}())),}
\DoxyCodeLine{82         line\_number\_(1), source\_name\_(std::move(source\_name)), iter\_(source\_-\/>cbegin())}
\DoxyCodeLine{83     \{\}}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \mbox{\hyperlink{structtoml_1_1detail_1_1location_ae4d86376e3339fcf275dd71b6e79ca1f}{location}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{86     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a6d14d1511b6e4004d551e9f65c4fc40a}{location}}(\mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\&\&)      = \textcolor{keywordflow}{default};}
\DoxyCodeLine{87     \mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\& \mbox{\hyperlink{structtoml_1_1detail_1_1location_a77acc2849bdd83eca982742d351c763a}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{88     \mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\& \mbox{\hyperlink{structtoml_1_1detail_1_1location_a7ba5b1a10f969c93989ebfc648543dea}{operator=}}(\mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\&\&)      = \textcolor{keywordflow}{default};}
\DoxyCodeLine{89     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a39b58a822ccf2c0aad495f4acd71f530}{\string~location}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structtoml_1_1detail_1_1location_a7f06f6621d30b69718c08e8ee2f33644}{is\_ok}}() const noexcept\textcolor{keyword}{ override }\{\textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{bool}\textcolor{keyword}{>}(source\_);\}}
\DoxyCodeLine{92     \textcolor{keywordtype}{char} \mbox{\hyperlink{structtoml_1_1detail_1_1location_ad4f73b6a94e92e67b423bd75242eae08}{front}}() const noexcept\textcolor{keyword}{ override }\{\textcolor{keywordflow}{return} *iter\_;\}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \textcolor{comment}{// this const prohibits codes like `++(loc.iter())`.}}
\DoxyCodeLine{95     \textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1location_a031ca4974dde3ebefbd7398668bad4c8}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1location_a3fec075fe10382a901104613f84b37ee}{iter}}()  const noexcept \{\textcolor{keywordflow}{return} iter\_;\}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a031ca4974dde3ebefbd7398668bad4c8}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1location_a4b1ba9aeab640d375f97b09efce3dab8}{begin}}() const noexcept \{\textcolor{keywordflow}{return} source\_-\/>cbegin();\}}
\DoxyCodeLine{98     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a031ca4974dde3ebefbd7398668bad4c8}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1location_ad2b13df42c4b6202d006830c3fa5eee6}{end}}()   const noexcept \{\textcolor{keywordflow}{return} source\_-\/>cend();\}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100     \textcolor{comment}{// XXX `location::line\_num()` used to be implemented using `std::count` to}}
\DoxyCodeLine{101     \textcolor{comment}{// count a number of '\(\backslash\)n'. But with a long toml file (typically, 10k lines),}}
\DoxyCodeLine{102     \textcolor{comment}{// it becomes intolerably slow because each time it generates error messages,}}
\DoxyCodeLine{103     \textcolor{comment}{// it counts '\(\backslash\)n' from thousands of characters. To workaround it, I decided}}
\DoxyCodeLine{104     \textcolor{comment}{// to introduce `location::line\_number\_` member variable and synchronize it}}
\DoxyCodeLine{105     \textcolor{comment}{// to the location changes the point to look. So an overload of `iter()`}}
\DoxyCodeLine{106     \textcolor{comment}{// which returns mutable reference is removed and `advance()`, `retrace()`}}
\DoxyCodeLine{107     \textcolor{comment}{// and `reset()` is added.}}
\DoxyCodeLine{108     \textcolor{keywordtype}{void} \mbox{\hyperlink{structtoml_1_1detail_1_1location_a97b2915707242c6ffe7452431ed09333}{advance}}(\mbox{\hyperlink{structtoml_1_1detail_1_1location_a285ff825ac56534d138e4dfe3e935beb}{difference\_type}} n = 1) noexcept}
\DoxyCodeLine{109     \{}
\DoxyCodeLine{110         this-\/>line\_number\_ += \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(}
\DoxyCodeLine{111                 std::count(this-\/>iter\_, std::next(this-\/>iter\_, n), \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{112         this-\/>iter\_ += n;}
\DoxyCodeLine{113         \textcolor{keywordflow}{return};}
\DoxyCodeLine{114     \}}
\DoxyCodeLine{115     \textcolor{keywordtype}{void} \mbox{\hyperlink{structtoml_1_1detail_1_1location_a6ac09c7dc5a66e4bf8f9888170766123}{retrace}}(\mbox{\hyperlink{structtoml_1_1detail_1_1location_a285ff825ac56534d138e4dfe3e935beb}{difference\_type}} n = 1) noexcept}
\DoxyCodeLine{116     \{}
\DoxyCodeLine{117         this-\/>line\_number\_ -\/= \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(}
\DoxyCodeLine{118                 std::count(std::prev(this-\/>iter\_, n), this-\/>iter\_, \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{119         this-\/>iter\_ -\/= n;}
\DoxyCodeLine{120         \textcolor{keywordflow}{return};}
\DoxyCodeLine{121     \}}
\DoxyCodeLine{122     \textcolor{keywordtype}{void} \mbox{\hyperlink{structtoml_1_1detail_1_1location_ae7029e5f4aa2ab85280107391972cff0}{reset}}(\mbox{\hyperlink{structtoml_1_1detail_1_1location_a031ca4974dde3ebefbd7398668bad4c8}{const\_iterator}} rollback) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{123     \{}
\DoxyCodeLine{124         \textcolor{comment}{// since c++11, std::distance works in both ways for random-\/access}}
\DoxyCodeLine{125         \textcolor{comment}{// iterators and returns a negative value if `first > last`.}}
\DoxyCodeLine{126         \textcolor{keywordflow}{if}(0 <= std::distance(rollback, this-\/>iter\_)) \textcolor{comment}{// rollback < iter}}
\DoxyCodeLine{127         \{}
\DoxyCodeLine{128             this-\/>line\_number\_ -\/= \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(}
\DoxyCodeLine{129                     std::count(rollback, this-\/>iter\_, \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{130         \}}
\DoxyCodeLine{131         \textcolor{keywordflow}{else} \textcolor{comment}{// iter < rollback [[unlikely]]}}
\DoxyCodeLine{132         \{}
\DoxyCodeLine{133             this-\/>line\_number\_ += \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(}
\DoxyCodeLine{134                     std::count(this-\/>iter\_, rollback, \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{135         \}}
\DoxyCodeLine{136         this-\/>iter\_ = rollback;}
\DoxyCodeLine{137         \textcolor{keywordflow}{return};}
\DoxyCodeLine{138     \}}
\DoxyCodeLine{139 }
\DoxyCodeLine{140     std::string \mbox{\hyperlink{structtoml_1_1detail_1_1location_ad3cad7912b60d06e682a2539ad4b4b68}{str}}()\textcolor{keyword}{  const override }\{\textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(1, *this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_a3fec075fe10382a901104613f84b37ee}{iter}}());\}}
\DoxyCodeLine{141     std::string \mbox{\hyperlink{structtoml_1_1detail_1_1location_ad6a386a1bb61633d7dc51025ee4bd6be}{name}}()\textcolor{keyword}{ const override }\{\textcolor{keywordflow}{return} source\_name\_;\}}
\DoxyCodeLine{142 }
\DoxyCodeLine{143     std::string \mbox{\hyperlink{structtoml_1_1detail_1_1location_ad1787cf196aab7a9a04d0cf273ed5b60}{line\_num}}()\textcolor{keyword}{ const override}}
\DoxyCodeLine{144 \textcolor{keyword}{    }\{}
\DoxyCodeLine{145         \textcolor{keywordflow}{return} std::to\_string(this-\/>line\_number\_);}
\DoxyCodeLine{146     \}}
\DoxyCodeLine{147 }
\DoxyCodeLine{148     std::string \mbox{\hyperlink{structtoml_1_1detail_1_1location_a4df51ed73488866dcc16c61553c3ef00}{line}}()\textcolor{keyword}{ const override}}
\DoxyCodeLine{149 \textcolor{keyword}{    }\{}
\DoxyCodeLine{150         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_a8f9f4f467212a3d98dd8ef0534d9669e}{line\_begin}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_afcbaa10d76ab6e75849269d66742c238}{line\_end}}());}
\DoxyCodeLine{151     \}}
\DoxyCodeLine{152 }
\DoxyCodeLine{153     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a031ca4974dde3ebefbd7398668bad4c8}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1location_a8f9f4f467212a3d98dd8ef0534d9669e}{line\_begin}}() const noexcept}
\DoxyCodeLine{154     \{}
\DoxyCodeLine{155         \textcolor{keyword}{using }reverse\_iterator = std::reverse\_iterator<const\_iterator>;}
\DoxyCodeLine{156         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(reverse\_iterator(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_a3fec075fe10382a901104613f84b37ee}{iter}}()),}
\DoxyCodeLine{157                          reverse\_iterator(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_a4b1ba9aeab640d375f97b09efce3dab8}{begin}}()), \textcolor{charliteral}{'\(\backslash\)n'}).base();}
\DoxyCodeLine{158     \}}
\DoxyCodeLine{159     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a031ca4974dde3ebefbd7398668bad4c8}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1location_afcbaa10d76ab6e75849269d66742c238}{line\_end}}() const noexcept}
\DoxyCodeLine{160     \{}
\DoxyCodeLine{161         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_a3fec075fe10382a901104613f84b37ee}{iter}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_ad2b13df42c4b6202d006830c3fa5eee6}{end}}(), \textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{162     \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164     \textcolor{comment}{// location is always points a character. so the size is 1.}}
\DoxyCodeLine{165     std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1location_a941c7837aa01b07e838b83bf9c7484b1}{size}}() const noexcept\textcolor{keyword}{ override}}
\DoxyCodeLine{166 \textcolor{keyword}{    }\{}
\DoxyCodeLine{167         \textcolor{keywordflow}{return} 1u;}
\DoxyCodeLine{168     \}}
\DoxyCodeLine{169     std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1location_a2dbfb73f0f406069dfaff748f78bef41}{before}}() const noexcept\textcolor{keyword}{ override}}
\DoxyCodeLine{170 \textcolor{keyword}{    }\{}
\DoxyCodeLine{171         \textcolor{keyword}{const} \textcolor{keyword}{auto} sz = std::distance(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_a8f9f4f467212a3d98dd8ef0534d9669e}{line\_begin}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_a3fec075fe10382a901104613f84b37ee}{iter}}());}
\DoxyCodeLine{172         assert(sz >= 0);}
\DoxyCodeLine{173         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(sz);}
\DoxyCodeLine{174     \}}
\DoxyCodeLine{175     std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1location_a45b2634c7accd215659b3e672248e1ba}{after}}() const noexcept\textcolor{keyword}{ override}}
\DoxyCodeLine{176 \textcolor{keyword}{    }\{}
\DoxyCodeLine{177         \textcolor{keyword}{const} \textcolor{keyword}{auto} sz = std::distance(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_a3fec075fe10382a901104613f84b37ee}{iter}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1location_afcbaa10d76ab6e75849269d66742c238}{line\_end}}());}
\DoxyCodeLine{178         assert(sz >= 0);}
\DoxyCodeLine{179         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(sz);}
\DoxyCodeLine{180     \}}
\DoxyCodeLine{181 }
\DoxyCodeLine{182     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a8084d1b04443e5819764eeb9b3d9b256}{source\_ptr}} \textcolor{keyword}{const}\& \mbox{\hyperlink{structtoml_1_1detail_1_1location_abb56f59d170d61216cdf848c329b5c96}{source}}() const\& noexcept \{\textcolor{keywordflow}{return} source\_;\}}
\DoxyCodeLine{183     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a8084d1b04443e5819764eeb9b3d9b256}{source\_ptr}}\&\&      \mbox{\hyperlink{structtoml_1_1detail_1_1location_afacc5c2b717fd18ade74f8aaf8917976}{source}}() \&\&     \textcolor{keyword}{noexcept} \{\textcolor{keywordflow}{return} std::move(source\_);\}}
\DoxyCodeLine{184 }
\DoxyCodeLine{185   \textcolor{keyword}{private}:}
\DoxyCodeLine{186 }
\DoxyCodeLine{187     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a8084d1b04443e5819764eeb9b3d9b256}{source\_ptr}}     source\_;}
\DoxyCodeLine{188     std::size\_t    line\_number\_;}
\DoxyCodeLine{189     std::string    source\_name\_;}
\DoxyCodeLine{190     \mbox{\hyperlink{structtoml_1_1detail_1_1location_a031ca4974dde3ebefbd7398668bad4c8}{const\_iterator}} iter\_;}
\DoxyCodeLine{191 \};}
\DoxyCodeLine{192 }
\DoxyCodeLine{193 \textcolor{comment}{// region represents a range in a container, which contains a file content.}}
\DoxyCodeLine{194 \textcolor{comment}{//}}
\DoxyCodeLine{195 \textcolor{comment}{// it contains pointer to the file content and iterator that points the first}}
\DoxyCodeLine{196 \textcolor{comment}{// and last location.}}
\DoxyCodeLine{197 \textcolor{keyword}{struct }\mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}} final : \textcolor{keyword}{public} \mbox{\hyperlink{structtoml_1_1detail_1_1region__base}{region\_base}}}
\DoxyCodeLine{198 \{}
\DoxyCodeLine{199     \textcolor{keyword}{using }\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} = \textcolor{keyword}{typename} std::vector<char>::const\_iterator;}
\DoxyCodeLine{200     \textcolor{keyword}{using }\mbox{\hyperlink{structtoml_1_1detail_1_1region_a4cea85454b69a5a2ae7a337977636644}{source\_ptr}}     = std::shared\_ptr<const std::vector<char>>;}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     \textcolor{comment}{// delete default constructor. source\_ never be null.}}
\DoxyCodeLine{203     \mbox{\hyperlink{structtoml_1_1detail_1_1region_aeff35818a52bc7556699d0d9b97e84be}{region}}() = \textcolor{keyword}{delete};}
\DoxyCodeLine{204 }
\DoxyCodeLine{205     \textcolor{keyword}{explicit} \mbox{\hyperlink{structtoml_1_1detail_1_1region_aaeadd37e4fabbac71d0f402884a5ec98}{region}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\& loc)}
\DoxyCodeLine{206       : source\_(loc.\mbox{\hyperlink{structtoml_1_1detail_1_1region_a547b86430e6d82d771b74e76af122276}{source}}()), source\_name\_(loc.\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab2940e58e40a9dc9da8bce16372cefec}{name}}()),}
\DoxyCodeLine{207         first\_(loc.iter()), last\_(loc.iter())}
\DoxyCodeLine{208     \{\}}
\DoxyCodeLine{209     \textcolor{keyword}{explicit} \mbox{\hyperlink{structtoml_1_1detail_1_1region_aa32388d28d71e5b86a8bb4b3f94d8fd1}{region}}(\mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\&\& loc)}
\DoxyCodeLine{210       : source\_(loc.\mbox{\hyperlink{structtoml_1_1detail_1_1region_a547b86430e6d82d771b74e76af122276}{source}}()), source\_name\_(loc.\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab2940e58e40a9dc9da8bce16372cefec}{name}}()),}
\DoxyCodeLine{211         first\_(loc.iter()), last\_(loc.iter())}
\DoxyCodeLine{212     \{\}}
\DoxyCodeLine{213 }
\DoxyCodeLine{214     \mbox{\hyperlink{structtoml_1_1detail_1_1region_af7bafe8da6e7c9d014edc3f08213bdfc}{region}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\& loc, \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} f, \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} l)}
\DoxyCodeLine{215       : source\_(loc.\mbox{\hyperlink{structtoml_1_1detail_1_1region_a547b86430e6d82d771b74e76af122276}{source}}()), source\_name\_(loc.\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab2940e58e40a9dc9da8bce16372cefec}{name}}()), first\_(f), last\_(l)}
\DoxyCodeLine{216     \{\}}
\DoxyCodeLine{217     \mbox{\hyperlink{structtoml_1_1detail_1_1region_a242906a81999ef6d1c012156193bb6cb}{region}}(\mbox{\hyperlink{structtoml_1_1detail_1_1location}{location}}\&\& loc, \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} f, \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} l)}
\DoxyCodeLine{218       : source\_(loc.\mbox{\hyperlink{structtoml_1_1detail_1_1region_a547b86430e6d82d771b74e76af122276}{source}}()), source\_name\_(loc.\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab2940e58e40a9dc9da8bce16372cefec}{name}}()), first\_(f), last\_(l)}
\DoxyCodeLine{219     \{\}}
\DoxyCodeLine{220 }
\DoxyCodeLine{221     \mbox{\hyperlink{structtoml_1_1detail_1_1region_a84428838fedbe271a1843da9798ae623}{region}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{222     \mbox{\hyperlink{structtoml_1_1detail_1_1region_a864cefe97bd9f64e0323ed253066e57d}{region}}(\mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}}\&\&)      = \textcolor{keywordflow}{default};}
\DoxyCodeLine{223     \mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}}\& \mbox{\hyperlink{structtoml_1_1detail_1_1region_a782c8670065aa3b10d8afa2804e9f459}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}}\&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{224     \mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}}\& \mbox{\hyperlink{structtoml_1_1detail_1_1region_afd6970910aba9c0da2812863eff1ca9b}{operator=}}(\mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}}\&\&)      = \textcolor{keywordflow}{default};}
\DoxyCodeLine{225     \mbox{\hyperlink{structtoml_1_1detail_1_1region_a06ca8b284b5526e7101709a0d8b4904f}{\string~region}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{226 }
\DoxyCodeLine{227     \mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}}\& \mbox{\hyperlink{structtoml_1_1detail_1_1region_a0c275db7ccd4674a9bad7c73fe05227b}{operator+=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtoml_1_1detail_1_1region}{region}}\& other)}
\DoxyCodeLine{228     \{}
\DoxyCodeLine{229         \textcolor{comment}{// different regions cannot be concatenated}}
\DoxyCodeLine{230         assert(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a29fb4cdafc62298a0f13809e4c8342c8}{begin}}() == other.\mbox{\hyperlink{structtoml_1_1detail_1_1region_a29fb4cdafc62298a0f13809e4c8342c8}{begin}}() \&\& this-\/>end() == other.\mbox{\hyperlink{structtoml_1_1detail_1_1region_ae93c08cd5a238ea4bf1a762b4b5ed835}{end}}() \&\&}
\DoxyCodeLine{231                this-\/>last\_   == other.first\_);}
\DoxyCodeLine{232 }
\DoxyCodeLine{233         this-\/>last\_ = other.last\_;}
\DoxyCodeLine{234         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{235     \}}
\DoxyCodeLine{236 }
\DoxyCodeLine{237     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structtoml_1_1detail_1_1region_a87508e13996dd9305fcbb7a99d7d12d1}{is\_ok}}() const noexcept\textcolor{keyword}{ override }\{\textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{bool}\textcolor{keyword}{>}(source\_);\}}
\DoxyCodeLine{238     \textcolor{keywordtype}{char} \mbox{\hyperlink{structtoml_1_1detail_1_1region_aabbe7b0acd319dc04b4bf1cb685c8274}{front}}() const noexcept\textcolor{keyword}{ override }\{\textcolor{keywordflow}{return} *first\_;\}}
\DoxyCodeLine{239 }
\DoxyCodeLine{240     std::string \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab29b9569c262fd0d1068501c05f49ea7}{str}}()\textcolor{keyword}{  const override }\{\textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(first\_, last\_);\}}
\DoxyCodeLine{241     std::string \mbox{\hyperlink{structtoml_1_1detail_1_1region_a0a02f9cb4afd77d5a09ce5292ef24297}{line}}()\textcolor{keyword}{ const override}}
\DoxyCodeLine{242 \textcolor{keyword}{    }\{}
\DoxyCodeLine{243         \textcolor{keywordflow}{if}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a03d67f7055cad721b1d3254b92b696d3}{contain\_newline}}())}
\DoxyCodeLine{244         \{}
\DoxyCodeLine{245             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a4ea699e45d31d3d4bba240f6241015d5}{line\_begin}}(),}
\DoxyCodeLine{246                     \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a4ea699e45d31d3d4bba240f6241015d5}{line\_begin}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a9282bb9395b88ce24da0e0c2d59dc787}{last}}(), \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{247         \}}
\DoxyCodeLine{248         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a4ea699e45d31d3d4bba240f6241015d5}{line\_begin}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab8bdfc3c4a6dd890c12aaa7f3302c37f}{line\_end}}());}
\DoxyCodeLine{249     \}}
\DoxyCodeLine{250     std::string \mbox{\hyperlink{structtoml_1_1detail_1_1region_acb64ba397c4915b0dc28890da4c6c01a}{line\_num}}()\textcolor{keyword}{ const override}}
\DoxyCodeLine{251 \textcolor{keyword}{    }\{}
\DoxyCodeLine{252         \textcolor{keywordflow}{return} std::to\_string(1 + std::count(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a29fb4cdafc62298a0f13809e4c8342c8}{begin}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a22bf6eebe69a64cd124b99896ea25ac7}{first}}(), \textcolor{charliteral}{'\(\backslash\)n'}));}
\DoxyCodeLine{253     \}}
\DoxyCodeLine{254 }
\DoxyCodeLine{255     std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1region_a5aed78b6f0ba4b17996afe7ac282d089}{size}}() const noexcept\textcolor{keyword}{ override}}
\DoxyCodeLine{256 \textcolor{keyword}{    }\{}
\DoxyCodeLine{257         \textcolor{keyword}{const} \textcolor{keyword}{auto} sz = std::distance(first\_, last\_);}
\DoxyCodeLine{258         assert(sz >= 0);}
\DoxyCodeLine{259         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(sz);}
\DoxyCodeLine{260     \}}
\DoxyCodeLine{261     std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1region_a5975656927543592fe533b4a0317652c}{before}}() const noexcept\textcolor{keyword}{ override}}
\DoxyCodeLine{262 \textcolor{keyword}{    }\{}
\DoxyCodeLine{263         \textcolor{keyword}{const} \textcolor{keyword}{auto} sz = std::distance(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a4ea699e45d31d3d4bba240f6241015d5}{line\_begin}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a22bf6eebe69a64cd124b99896ea25ac7}{first}}());}
\DoxyCodeLine{264         assert(sz >= 0);}
\DoxyCodeLine{265         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(sz);}
\DoxyCodeLine{266     \}}
\DoxyCodeLine{267     std::size\_t \mbox{\hyperlink{structtoml_1_1detail_1_1region_a35d9eb4ee3b9a461e5f5a6c14cf76ea7}{after}}() const noexcept\textcolor{keyword}{ override}}
\DoxyCodeLine{268 \textcolor{keyword}{    }\{}
\DoxyCodeLine{269         \textcolor{keyword}{const} \textcolor{keyword}{auto} sz = std::distance(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a9282bb9395b88ce24da0e0c2d59dc787}{last}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab8bdfc3c4a6dd890c12aaa7f3302c37f}{line\_end}}());}
\DoxyCodeLine{270         assert(sz >= 0);}
\DoxyCodeLine{271         \textcolor{keywordflow}{return} \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(sz);}
\DoxyCodeLine{272     \}}
\DoxyCodeLine{273 }
\DoxyCodeLine{274     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structtoml_1_1detail_1_1region_a03d67f7055cad721b1d3254b92b696d3}{contain\_newline}}() const noexcept}
\DoxyCodeLine{275     \{}
\DoxyCodeLine{276         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a22bf6eebe69a64cd124b99896ea25ac7}{first}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a9282bb9395b88ce24da0e0c2d59dc787}{last}}(), \textcolor{charliteral}{'\(\backslash\)n'}) != this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a9282bb9395b88ce24da0e0c2d59dc787}{last}}();}
\DoxyCodeLine{277     \}}
\DoxyCodeLine{278 }
\DoxyCodeLine{279     \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1region_a4ea699e45d31d3d4bba240f6241015d5}{line\_begin}}() const noexcept}
\DoxyCodeLine{280     \{}
\DoxyCodeLine{281         \textcolor{keyword}{using }reverse\_iterator = std::reverse\_iterator<const\_iterator>;}
\DoxyCodeLine{282         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(reverse\_iterator(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a22bf6eebe69a64cd124b99896ea25ac7}{first}}()),}
\DoxyCodeLine{283                          reverse\_iterator(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a29fb4cdafc62298a0f13809e4c8342c8}{begin}}()), \textcolor{charliteral}{'\(\backslash\)n'}).base();}
\DoxyCodeLine{284     \}}
\DoxyCodeLine{285     \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab8bdfc3c4a6dd890c12aaa7f3302c37f}{line\_end}}() const noexcept}
\DoxyCodeLine{286     \{}
\DoxyCodeLine{287         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a9282bb9395b88ce24da0e0c2d59dc787}{last}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_ae93c08cd5a238ea4bf1a762b4b5ed835}{end}}(), \textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{288     \}}
\DoxyCodeLine{289 }
\DoxyCodeLine{290     \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1region_a29fb4cdafc62298a0f13809e4c8342c8}{begin}}() const noexcept \{\textcolor{keywordflow}{return} source\_-\/>cbegin();\}}
\DoxyCodeLine{291     \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1region_ae93c08cd5a238ea4bf1a762b4b5ed835}{end}}()   const noexcept \{\textcolor{keywordflow}{return} source\_-\/>cend();\}}
\DoxyCodeLine{292     \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1region_a22bf6eebe69a64cd124b99896ea25ac7}{first}}() const noexcept \{\textcolor{keywordflow}{return} first\_;\}}
\DoxyCodeLine{293     \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} \mbox{\hyperlink{structtoml_1_1detail_1_1region_a9282bb9395b88ce24da0e0c2d59dc787}{last}}()  const noexcept \{\textcolor{keywordflow}{return} last\_;\}}
\DoxyCodeLine{294 }
\DoxyCodeLine{295     \mbox{\hyperlink{structtoml_1_1detail_1_1region_a4cea85454b69a5a2ae7a337977636644}{source\_ptr}} \textcolor{keyword}{const}\& \mbox{\hyperlink{structtoml_1_1detail_1_1region_a547b86430e6d82d771b74e76af122276}{source}}() const\& noexcept \{\textcolor{keywordflow}{return} source\_;\}}
\DoxyCodeLine{296     \mbox{\hyperlink{structtoml_1_1detail_1_1region_a4cea85454b69a5a2ae7a337977636644}{source\_ptr}}\&\&      \mbox{\hyperlink{structtoml_1_1detail_1_1region_a42267d523b717d79ae463bf57e94e2d7}{source}}() \&\&     \textcolor{keyword}{noexcept} \{\textcolor{keywordflow}{return} std::move(source\_);\}}
\DoxyCodeLine{297 }
\DoxyCodeLine{298     std::string \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab2940e58e40a9dc9da8bce16372cefec}{name}}()\textcolor{keyword}{ const override }\{\textcolor{keywordflow}{return} source\_name\_;\}}
\DoxyCodeLine{299 }
\DoxyCodeLine{300     std::vector<std::string> \mbox{\hyperlink{structtoml_1_1detail_1_1region_acf4d7a029b56c38ec3f1dcfa29f2968f}{comments}}()\textcolor{keyword}{ const override}}
\DoxyCodeLine{301 \textcolor{keyword}{    }\{}
\DoxyCodeLine{302         \textcolor{comment}{// assuming the current region (`*this`) points a value.}}
\DoxyCodeLine{303         \textcolor{comment}{// ```toml}}
\DoxyCodeLine{304         \textcolor{comment}{// a = "{}value"{}}}
\DoxyCodeLine{305         \textcolor{comment}{//     \string^\string^\string^\string^\string^\string^\string^-\/ this region}}
\DoxyCodeLine{306         \textcolor{comment}{// ```}}
\DoxyCodeLine{307         \textcolor{keyword}{using }rev\_iter = std::reverse\_iterator<const\_iterator>;}
\DoxyCodeLine{308 }
\DoxyCodeLine{309         std::vector<std::string> com\{\};}
\DoxyCodeLine{310         \{}
\DoxyCodeLine{311             \textcolor{comment}{// find comments just before the current region.}}
\DoxyCodeLine{312             \textcolor{comment}{// ```toml}}
\DoxyCodeLine{313             \textcolor{comment}{// \# this should be collected.}}
\DoxyCodeLine{314             \textcolor{comment}{// \# this also.}}
\DoxyCodeLine{315             \textcolor{comment}{// a = value \# not this.}}
\DoxyCodeLine{316             \textcolor{comment}{// ```}}
\DoxyCodeLine{317 }
\DoxyCodeLine{318             \textcolor{comment}{// \# this is a comment for `a`, not array elements.}}
\DoxyCodeLine{319             \textcolor{comment}{// a = [1, 2, 3, 4, 5]}}
\DoxyCodeLine{320             \textcolor{keywordflow}{if}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a22bf6eebe69a64cd124b99896ea25ac7}{first}}() == std::find\_if(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a4ea699e45d31d3d4bba240f6241015d5}{line\_begin}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a22bf6eebe69a64cd124b99896ea25ac7}{first}}(),}
\DoxyCodeLine{321                 [](\textcolor{keyword}{const} \textcolor{keywordtype}{char} c) \textcolor{keyword}{noexcept} -\/> \textcolor{keywordtype}{bool} \{\textcolor{keywordflow}{return} c == \textcolor{charliteral}{'['} || c == \textcolor{charliteral}{'\{'};\}))}
\DoxyCodeLine{322             \{}
\DoxyCodeLine{323                 \textcolor{keyword}{auto} iter = this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a4ea699e45d31d3d4bba240f6241015d5}{line\_begin}}(); \textcolor{comment}{// points the first character}}
\DoxyCodeLine{324                 \textcolor{keywordflow}{while}(iter != this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a29fb4cdafc62298a0f13809e4c8342c8}{begin}}())}
\DoxyCodeLine{325                 \{}
\DoxyCodeLine{326                     iter = std::prev(iter);}
\DoxyCodeLine{327 }
\DoxyCodeLine{328                     \textcolor{comment}{// range [line\_start, iter) represents the previous line}}
\DoxyCodeLine{329                     \textcolor{keyword}{const} \textcolor{keyword}{auto} line\_start   = \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(}
\DoxyCodeLine{330                             rev\_iter(iter), rev\_iter(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a29fb4cdafc62298a0f13809e4c8342c8}{begin}}()), \textcolor{charliteral}{'\(\backslash\)n'}).base();}
\DoxyCodeLine{331                     \textcolor{keyword}{const} \textcolor{keyword}{auto} comment\_found = \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(line\_start, iter, \textcolor{charliteral}{'\#'});}
\DoxyCodeLine{332                     \textcolor{keywordflow}{if}(comment\_found == iter)}
\DoxyCodeLine{333                     \{}
\DoxyCodeLine{334                         \textcolor{keywordflow}{break}; \textcolor{comment}{// comment not found.}}
\DoxyCodeLine{335                     \}}
\DoxyCodeLine{336 }
\DoxyCodeLine{337                     \textcolor{comment}{// exclude the following case.}}
\DoxyCodeLine{338                     \textcolor{comment}{// > a = "{}foo"{} \# comment // <-\/-\/ this is not a comment for b but a.}}
\DoxyCodeLine{339                     \textcolor{comment}{// > b = "{}current value"{}}}
\DoxyCodeLine{340                     \textcolor{keywordflow}{if}(std::all\_of(line\_start, comment\_found,}
\DoxyCodeLine{341                             [](\textcolor{keyword}{const} \textcolor{keywordtype}{char} c) \textcolor{keyword}{noexcept} -\/> \textcolor{keywordtype}{bool} \{}
\DoxyCodeLine{342                                 \textcolor{keywordflow}{return} c == \textcolor{charliteral}{' '} || c == \textcolor{charliteral}{'\(\backslash\)t'};}
\DoxyCodeLine{343                             \}))}
\DoxyCodeLine{344                     \{}
\DoxyCodeLine{345                         \textcolor{comment}{// unwrap the first '\#' by std::next.}}
\DoxyCodeLine{346                         \textcolor{keyword}{auto} s = \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(std::next(comment\_found), iter);}
\DoxyCodeLine{347                         \textcolor{keywordflow}{if}(!s.empty() \&\& s.back() == \textcolor{charliteral}{'\(\backslash\)r'}) \{s.pop\_back();\}}
\DoxyCodeLine{348                         com.push\_back(std::move(s));}
\DoxyCodeLine{349                     \}}
\DoxyCodeLine{350                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{351                     \{}
\DoxyCodeLine{352                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{353                     \}}
\DoxyCodeLine{354                     iter = line\_start;}
\DoxyCodeLine{355                 \}}
\DoxyCodeLine{356             \}}
\DoxyCodeLine{357         \}}
\DoxyCodeLine{358 }
\DoxyCodeLine{359         \textcolor{keywordflow}{if}(com.size() > 1)}
\DoxyCodeLine{360         \{}
\DoxyCodeLine{361             std::reverse(com.begin(), com.end());}
\DoxyCodeLine{362         \}}
\DoxyCodeLine{363 }
\DoxyCodeLine{364         \{}
\DoxyCodeLine{365             \textcolor{comment}{// find comments just after the current region.}}
\DoxyCodeLine{366             \textcolor{comment}{// ```toml}}
\DoxyCodeLine{367             \textcolor{comment}{// \# not this.}}
\DoxyCodeLine{368             \textcolor{comment}{// a = value \# this one.}}
\DoxyCodeLine{369             \textcolor{comment}{// a = [ \# not this (technically difficult)}}
\DoxyCodeLine{370             \textcolor{comment}{//}}
\DoxyCodeLine{371             \textcolor{comment}{// ] \# and this.}}
\DoxyCodeLine{372             \textcolor{comment}{// ```}}
\DoxyCodeLine{373             \textcolor{comment}{// The reason why it's difficult is that it requires parsing in the}}
\DoxyCodeLine{374             \textcolor{comment}{// following case.}}
\DoxyCodeLine{375             \textcolor{comment}{// ```toml}}
\DoxyCodeLine{376             \textcolor{comment}{// a = [ 10 \# this comment is for `10`. not for `a` but `a[0]`.}}
\DoxyCodeLine{377             \textcolor{comment}{// \# ...}}
\DoxyCodeLine{378             \textcolor{comment}{// ] \# this is apparently a comment for a.}}
\DoxyCodeLine{379             \textcolor{comment}{//}}
\DoxyCodeLine{380             \textcolor{comment}{// b = [}}
\DoxyCodeLine{381             \textcolor{comment}{// 3.14 ] \# there is no way to add a comment to `3.14` currently.}}
\DoxyCodeLine{382             \textcolor{comment}{//}}
\DoxyCodeLine{383             \textcolor{comment}{// c = [}}
\DoxyCodeLine{384             \textcolor{comment}{//   3.14 \# do this if you need a comment here.}}
\DoxyCodeLine{385             \textcolor{comment}{// ]}}
\DoxyCodeLine{386             \textcolor{comment}{// ```}}
\DoxyCodeLine{387             \textcolor{keyword}{const} \textcolor{keyword}{auto} comment\_found =}
\DoxyCodeLine{388                 \mbox{\hyperlink{namespacetoml_a31abd17e078e497fb224d79260910b8d}{std::find}}(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a9282bb9395b88ce24da0e0c2d59dc787}{last}}(), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab8bdfc3c4a6dd890c12aaa7f3302c37f}{line\_end}}(), \textcolor{charliteral}{'\#'});}
\DoxyCodeLine{389             \textcolor{keywordflow}{if}(comment\_found != this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab8bdfc3c4a6dd890c12aaa7f3302c37f}{line\_end}}()) \textcolor{comment}{// '\#' found}}
\DoxyCodeLine{390             \{}
\DoxyCodeLine{391                 \textcolor{comment}{// table = \{key = "{}value"{}\} \# what is this for?}}
\DoxyCodeLine{392                 \textcolor{comment}{// the above comment is not for "{}value"{}, but \{key="{}value"{}\}.}}
\DoxyCodeLine{393                 \textcolor{keywordflow}{if}(comment\_found == std::find\_if(this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_a9282bb9395b88ce24da0e0c2d59dc787}{last}}(), comment\_found,}
\DoxyCodeLine{394                     [](\textcolor{keyword}{const} \textcolor{keywordtype}{char} c) \textcolor{keyword}{noexcept} -\/> \textcolor{keywordtype}{bool} \{}
\DoxyCodeLine{395                         \textcolor{keywordflow}{return} !(c == \textcolor{charliteral}{' '} || c == \textcolor{charliteral}{'\(\backslash\)t'} || c == \textcolor{charliteral}{','});}
\DoxyCodeLine{396                     \}))}
\DoxyCodeLine{397                 \{}
\DoxyCodeLine{398                     \textcolor{comment}{// unwrap the first '\#' by std::next.}}
\DoxyCodeLine{399                     \textcolor{keyword}{auto} s = \mbox{\hyperlink{namespacetoml_1_1detail_af3e0c1dfeb7087f3a96b5a52cfc1d21e}{make\_string}}(std::next(comment\_found), this-\/>\mbox{\hyperlink{structtoml_1_1detail_1_1region_ab8bdfc3c4a6dd890c12aaa7f3302c37f}{line\_end}}());}
\DoxyCodeLine{400                     \textcolor{keywordflow}{if}(!s.empty() \&\& s.back() == \textcolor{charliteral}{'\(\backslash\)r'}) \{s.pop\_back();\}}
\DoxyCodeLine{401                     com.push\_back(std::move(s));}
\DoxyCodeLine{402                 \}}
\DoxyCodeLine{403             \}}
\DoxyCodeLine{404         \}}
\DoxyCodeLine{405         \textcolor{keywordflow}{return} com;}
\DoxyCodeLine{406     \}}
\DoxyCodeLine{407 }
\DoxyCodeLine{408   \textcolor{keyword}{private}:}
\DoxyCodeLine{409 }
\DoxyCodeLine{410     \mbox{\hyperlink{structtoml_1_1detail_1_1region_a4cea85454b69a5a2ae7a337977636644}{source\_ptr}}     source\_;}
\DoxyCodeLine{411     std::string    source\_name\_;}
\DoxyCodeLine{412     \mbox{\hyperlink{structtoml_1_1detail_1_1region_ab344cc4923ef929ba6063543143fcae9}{const\_iterator}} first\_, last\_;}
\DoxyCodeLine{413 \};}
\DoxyCodeLine{414 }
\DoxyCodeLine{415 \} \textcolor{comment}{// detail}}
\DoxyCodeLine{416 \} \textcolor{comment}{// toml}}
\DoxyCodeLine{417 \textcolor{preprocessor}{\#endif}\textcolor{comment}{// TOML11\_REGION\_H}}

\end{DoxyCode}
